{% extends "ibo2013_staff.html" %}

{% block scripts %}
<script src="/static/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="/static/staff.js" type="text/javascript"></script>
{% endblock %}

{% block main %}
<script type="text/javascript">
     function refresh() {
        if($('#do_sync').is(':checked')){
         window.location.reload(true);
        }
     }
    reloadInterval = setInterval( "refresh()", 2000 );
</script>


<p>Question: <strong>{{ question.name }}</strong> version {{vnode.version}}</p>
<input type="checkbox" id="do_sync" checked/><label for="do_sync">sync</label>
<div style="width:50em;margin-bottom:5em;">
{% for q in struct %}
  {% for el in q.data %} 
    {% if el.tag == "text" %}
        <strong>Question text:</strong>{{el.data}}<br/>
    {% endif %}

    {% if el.tag == "task" %}
        <strong>Task: </strong>{{el.data}}<br/>
    {% endif %}

    {% if el.tag == "answerlist" %}
        {% for sub in el.data %}
            {% if sub.tag == "answersplit" %}
                <strong>Answer column:</strong> {{sub.data}}<br/>
            {% endif %}
            {% if sub.tag == "choice" %}
                <strong>Proposition:</strong> {{sub.data}} <br/>
            {% endif %}
        {% endfor %}
    {% endif %}

    {% if el.tag == "list" %}
        <ul>
        {% for sub in el.data %}
            <li>{{sub.data}}</li>
        {% endfor %}
        </ul>
    {% endif %}

    {% if el.tag == "figure" %}
        <img src="/staff/images/{{el.meta}}/{{question.id}}/1/{{vnode.version}}/" onclick="enlarge(this);">
        {% for sub in el.data %}
            <td id="o-{{sub.id}}">{{sub.data}}</td>
        {% endfor %}
    {% endif %}
  {% endfor %}
{% endfor %}
</div>

{% endblock %}
